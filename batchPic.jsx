var tls = app.activeDocument.layerSets;// var base = tls.getByName("基础包型");var color = tls.getByName("颜色");var cowhide = tls.getByName("纹理");var rare = tls.getByName("蛇皮");var metal = tls.getByName("五金");var printing = tls.getByName("印花");// var idName = {"颜色":1,"牛皮":2,"五金":3,"印花":4,"珍稀皮":5};var cowhideComb = ["颜色","纹理","五金"];var rareComb = ["五金","蛇皮"];var printingComb = ["五金","印花"];var baseBag = app.activeDocument.name.substr(0, app.activeDocument.name.indexOf("."));//prompt("输入批量生成图片的基础款编号", "001");// var colorPro = [];// for (var i = 0; i < color.layers.length; i++) {// 	colorPro.push("_"+color.name+"@"color.layers[i].name);// }var combination = [];// 牛皮图片// base.visible = true;color.visible = true;cowhide.visible = true;rare.visible = true;metal.visible = true;printing.visible = true;var jpegOptions = new JPEGSaveOptions();var filePrefix = "/Users/bighua/Documents/ps/1080psd/"+ baseBag +"/";jpegOptions.quality = 1;var lastPic = {};var colorName = '';var cowName = '';var metalName = '';var rareName = '';var printName = '';for (var i = 0; i < color.layers.length; i++) {	colorName = color.name;	var colorPro = colorName + "@" + color.layers[i].name;	if (lastPic[colorName] !== undefined) {		color.layers[lastPic[colorName]].visible = false;	}	lastPic[colorName] = i;	color.layers[i].visible = true;		for (var j = 0; j < cowhide.layers.length; j++) {		cowName = cowhide.name;		var cowhidePro = cowName + "@" + cowhide.layers[j].name;		// if (cowhidePro.indexOf(baseBag) >= 0) {			if (lastPic[cowName] !== undefined) {				cowhide.layers[lastPic[cowName]].visible = false;			}			lastPic[cowName] = j;			cowhide.layers[j].visible = true;						for (var k=0; k < metal.layers.length;k++) {				metalName = metal.name;				var metalPro = metalName + "@" + metal.layers[k].name;				// if (metalPro.indexOf(baseBag) >= 0) {					if (lastPic[metalName] !== undefined) {						metal.layers[lastPic[metalName]].visible = false;					}					lastPic[metalName] = k;					metal.layers[k].visible = true;										var pic = "_"+colorPro+"_"+cowhidePro+"_"+metalPro+"_.jpg";                    var f = new File(filePrefix+pic);                    app.activeDocument.saveAs(f, jpegOptions, true);				// }			}		// }	}}if (lastPic[colorName] !== undefined) {	color.layers[lastPic[colorName]].visible = false;}if (lastPic[cowName] !== undefined) {	cowhide.layers[lastPic[cowName]].visible = false;}if (lastPic[metalName] !== undefined) {	metal.layers[lastPic[metalName]].visible = false;}var lastPic = {};for (var i=0; i < metal.layers.length;i++) {	metalName = metal.name;	var metalPro = metalName + "@" + metal.layers[i].name;	// if (metalPro.indexOf(baseBag) >= 0) {	if (lastPic[metalName] !== undefined) {		metal.layers[lastPic[metalName]].visible = false;	}	lastPic[metalName] = i;	metal.layers[i].visible = true;					for (var k=0; k < rare.layers.length;k++) {		rareName = rare.name;		var rarePro = rareName + "@" + rare.layers[k].name;			if (lastPic[rareName] !== undefined) {				rare.layers[lastPic[rareName]].visible = false;			}			lastPic[rareName] = k;			rare.layers[k].visible = true;						var pic = "_"+metalPro+"_"+rarePro+"_.jpg";            var f = new File(filePrefix+pic);            app.activeDocument.saveAs(f, jpegOptions, true);	}}if (lastPic[metalName] !== undefined) {	metal.layers[lastPic[metalName]].visible = false;}if (lastPic[rareName] !== undefined) {	rare.layers[lastPic[rareName]].visible = false;}var lastPic = {};for (var i=0; i < metal.layers.length;i++) {	metalName = metal.name;	var metalPro = metalName + "@" + metal.layers[i].name;	// if (metalPro.indexOf(baseBag) >= 0) {	if (lastPic[metalName] !== undefined) {		metal.layers[lastPic[metalName]].visible = false;	}	lastPic[metalName] = i;	metal.layers[i].visible = true;				for (var k=0; k < printing.layers.length;k++) {		printName = printing.name;		var printPro = printName + "@" + printing.layers[k].name;			if (lastPic[printName] !== undefined) {				printing.layers[lastPic[printName]].visible = false;			}			lastPic[printName] = k;			printing.layers[k].visible = true;						var pic = "_"+metalPro+"_"+printPro+"_.jpg";            var f = new File(filePrefix+pic);            app.activeDocument.saveAs(f, jpegOptions, true);	}}if (lastPic[metalName] !== undefined) {	metal.layers[lastPic[metalName]].visible = false;}if (lastPic[printName] !== undefined) {	printing.layers[lastPic[printName]].visible = false;}